/* обов'язково, щоб приховані елементи не мигтіли до ініта */
[x-cloak] { display: none !important; }

/* ==== Base card ==== */
.product-card{
  position: relative; display:flex; flex-direction:column; border-radius:12px; background:#fff;
  box-shadow:0 1px 0 rgba(0,0,0,.06); transition: box-shadow .25s ease, transform .2s ease;

  &__link{ position:absolute; inset:0; z-index:1; } /* клікабельність */
  &__media{ width:100%; }
  &__img{ width:100%; height:auto; aspect-ratio:1/1; object-fit:cover; display:block; border-radius:12px 12px 0 0; }
  &__content{ padding:16px; text-align:center; }
  &__title{ margin:0 0 8px; font-weight:600; line-height:1.2; }
  &__title a{ color:inherit; text-decoration:none; }
  &__title a:hover{ text-decoration:underline; }
  &__price{ font-weight:600; }
  &__cta{ padding:12px 16px 16px; }
  &__btn{ position:relative; z-index:2; } /* над stretched link */

  &:hover{ box-shadow:0 12px 28px rgba(0,0,0,.12); }

  /* overlay всередині картки (той самий DOM використовується і для мобільного шита) */
  &__hover{
    position:absolute; inset:8px; background:#fff; border-radius:12px;
    padding:16px; box-shadow:0 8px 24px rgba(0,0,0,.14);
    opacity:0; visibility:hidden; transform: translateY(8px);
    transition: opacity .2s ease, transform .2s ease, visibility 0s linear .2s;
    z-index:3; pointer-events:none; overflow:auto;
  }
  &:hover &__hover{
    opacity:1; visibility:visible; transform: translateY(0);
    transition-delay:0s; pointer-events:auto;
  }

  /* На мобільних overlay не показуємо — працює bottom-sheet */
  @media (max-width: 767.98px){
    &__hover{ display:none !important; }
  }
}

/* ==== Details (overlay/sheet) ==== */
.pcd{
  display:grid; grid-template-rows:auto auto 1fr auto; gap:12px; height:100%;

  &__header{ display:flex; justify-content:center; align-items:center; gap:8px; position:relative; }
  &__title{ font-weight:600; font-size:16px; line-height:1.25; margin:0; text-align:center; }
  &__wish,&__wish-round{
    appearance:none; border:1px solid #D5D5D5; background:#fff; border-radius:999px;
    width:28px; height:28px; display:inline-flex; align-items:center; justify-content:center;
    cursor:pointer; transition:border-color .2s ease, background .2s ease;
  }
  &__wish{ position:absolute; right:0; top:0; }
  &__wish-ic{ width:16px; height:16px; }

  &__short{ font-size:12px; line-height:1.45; color:#555; text-align:center; margin:0; }
  &__divider{ height:1px; background:#E6E6E6; margin:4px 0; }

  &__details{ font-size:13px; line-height:1.45; color:#222; overflow:auto; }
  &__details ul{ list-style:none; margin:0; padding:0; }
  &__details li{ display:flex; justify-content:space-between; padding:6px 0; border-bottom:1px solid #EFEFEF; }
  &__details li:last-child{ border-bottom:0; }
  &__details b,&__details strong{ font-weight:600; }

  &__controls{ margin-top:auto; display:grid; gap:10px; }
  &__qty{ display:flex; align-items:center; justify-content:space-between; }
  &__qty-label{ font-size:11px; letter-spacing:.08em; text-transform:uppercase; color:#6b6b6b; }
  &__qty-box{ display:inline-flex; align-items:center; gap:12px; }
  &__qty-btn{ width:26px; height:26px; border-radius:999px; border:1px solid #D5D5D5; background:#fff; display:flex; align-items:center; justify-content:center; cursor:pointer; }
  &__qty-val{ min-width:24px; text-align:center; font-weight:600; }

  &__actions{ display:flex; align-items:center; gap:8px; }
  &__add{ flex:1 1 auto; height:40px; border-radius:999px; display:flex; align-items:center; justify-content:center; }
  &__wish-round{ width:40px; height:40px; }

  &__read{ text-align:center; }
  .pcd__read-link{ display:inline-flex; align-items:center; justify-content:center; height:34px; padding:0 14px; border:1px solid #D5D5D5; border-radius:999px; font-size:12px; letter-spacing:.08em; text-transform:uppercase; background:#fff; cursor:pointer; }
  .pcd__read-link--desk{ display:inline-flex; }
  .pcd__read-link--mob{ display:none; }
  @media (max-width: 767.98px){
    .pcd__read-link--desk{ display:none; }
    .pcd__read-link--mob{ display:inline-flex; }
  }
}

/* ==== Bottom-sheet ==== */
.pcard-sheet{
  position:fixed; inset:0; z-index:60; pointer-events:none;
  &__backdrop{ position:absolute; inset:0; background:rgba(0,0,0,.35); opacity:0; transition:opacity .2s ease; }
  &__panel{
    position:absolute; left:0; right:0; bottom:0; background:#fff; border-radius:16px 16px 0 0;
    box-shadow:0 -12px 32px rgba(0,0,0,.25); transform:translateY(100%); transition:transform .28s ease;
    padding:14px 16px 18px; max-height:85vh; overflow:auto;
  }
  &__close{ position:absolute; right:10px; top:10px; border:0; background:#F5F5F5; width:28px; height:28px; border-radius:999px; cursor:pointer; }
  &__body{ padding-top:8px; }
}
.pcard-sheet.is-open{ pointer-events:auto; }
.pcard-sheet.is-open .pcard-sheet__backdrop{ opacity:1; }
.pcard-sheet.is-open .pcard-sheet__panel{ transform:translateY(0); }


/* ====== SAFETY RESET / LAYOUT ====== */
.product-card{
    position: relative;            /* важливо: батько для абсолютного overlay */
    display: flex;
    flex-direction: column;
    border-radius: 12px;
    overflow: visible;             /* якщо у тебе було overflow:hidden — залишай, якщо треба округлення медіа */
  }
  
  .product-card__link{             /* stretched link */
    position: absolute; inset: 0; z-index: 1;
  }
  
  .product-card__media{ position: relative; z-index: 0; }
  .product-card__content{ position: relative; z-index: 0; }
  .product-card__cta,
  .product-card__more{ position: relative; z-index: 2; } /* над stretched link */
  
  /* Зображення на всю ширину карти */
  .product-card__img{
    width: 100%; height: auto;
    display: block;
    object-fit: cover;
    aspect-ratio: 1/1;             /* можеш забрати, якщо у тебе інша висота */
    border-radius: 12px 12px 0 0;
  }
  
  /* ====== DESKTOP OVERLAY ====== */
  .product-card__hover{
    position: absolute;
    left: 8px; right: 8px; top: 8px; bottom: 8px;
    background: #fff;
    border-radius: 12px;
    box-shadow: 0 8px 24px rgba(0,0,0,.14);
    padding: 16px;
    overflow: auto;
  
    /* початково приховано */
    opacity: 0; visibility: hidden; transform: translateY(8px);
    pointer-events: none;
    transition: opacity .2s ease, transform .2s ease, visibility 0s linear .2s;
    z-index: 3;                     /* над stretched link і контентом */
  }
  
  .product-card:hover .product-card__hover{
    opacity: 1; visibility: visible; transform: translateY(0);
    pointer-events: auto;
    transition-delay: 0s;
  }
  
  /* Контент всередині overlay / bottom-sheet */
  .pcd{
    display: grid;
    grid-template-rows: auto auto 1fr auto;
    gap: 12px;
    height: 100%;
  }
  .pcd__details{ overflow: auto; }
  
  /* ====== MOBILE RULES ====== */
  @media (max-width: 767.98px){
    /* overlay на мобайлі повністю відключаємо */
    .product-card__hover{ display: none !important; }
  
    /* показуємо блок із мобільною кнопкою Read more під основною CTA */
    .product-card__more{ display: block; padding: 0 16px 16px; }
  
    .product-card__read{
      width: 100%; height: 36px;
      border: 1px solid #D5D5D5; border-radius: 999px;
      background: #fff;
      font-size: 12px; letter-spacing: .08em; text-transform: uppercase;
      display: flex; align-items: center; justify-content: center;
      cursor: pointer;
    }
  }
  
  /* На десктопі мобільну кнопку приховуємо */
  @media (min-width: 768px){
    .product-card__more{ display: none; }
  }
  
  /* дрібні підчистки richtext, щоб не “розсипалось” */
  .pcd__details ul{ list-style: none; margin: 0; padding: 0; }
  .pcd__details li{ display: flex; justify-content: space-between; gap: 12px; padding: 6px 0; border-bottom: 1px solid #EFEFEF; }
  .pcd__details li:last-child{ border-bottom: 0; }
  .pcd__details p{ margin: 6px 0; }
  
  /* Кнопки кількості — компактний вигляд */
  .pcd__qty-box{ display: inline-flex; align-items: center; gap: 12px; }
  .pcd__qty-btn{
    width: 26px; height: 26px; border-radius: 999px;
    border: 1px solid #D5D5D5; background: #fff;
    display: flex; align-items: center; justify-content: center;
    cursor: pointer;
  }
  .pcd__qty-val{ min-width: 24px; text-align: center; font-weight: 600; }
  