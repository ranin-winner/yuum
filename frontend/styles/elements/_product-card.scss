// @use '../config/all-config' as cfg;

/* обов'язково, щоб приховані елементи не мигтіли до ініта */
[x-cloak] { display: none !important; }

/* ==== Base card ==== */
.product-card{
    position: relative;
    display:flex;
    flex-direction:column;
    border-radius:12px;
    background: #EEEEEE;
    border: 1px solid #E0E0E0;
    transition: box-shadow .25s ease, transform .2s ease;

    &__link{
        position:absolute;
        inset:0;
        z-index:1;
    }

    &__media{
        width:100%;
        @media (max-width: 767.98px){
            max-width: 328px;
            max-height: 328px;
            margin: 0 auto;
        }

    }
    &__img{
        width:100%;
        height:auto;
        aspect-ratio:1/1;
        display:block;
        border-radius:12px 12px 0 0;
        // object-fit:cover;
        object-fit: contain;
    }

    &__content {
        text-align:center;
        margin-top: 16px;
        margin-bottom: 72px;

        @media (max-width: 767.98px){
            margin-bottom: 8px;
        }
    }

    &__title {
        margin:0 0 6px;
        line-height:24px;
        color: #474747;
    }

    &__title a {
        color:inherit;
        text-decoration:none;
    }

    &__title a:hover {
        text-decoration:underline;
    }

    &__price {
        font-size: 16px;
        font-weight:400;
        line-height: 22px;
        color: #474747;
    }

    &__cta {
        padding:12px 16px 16px;
    }

    &__btn {
        position:relative;
        z-index:2;
    }

    &:hover {
        background: #F5F5F5;
        transform: translateY(-2px);
        border: 1px solid #ADAEB0;
    }

    /* overlay всередині картки */
    &__hover {
        position:absolute;
        inset:8px;
        background:#F5F5F5;
        border-radius:12px;
        padding:16px;
        opacity:0;
        visibility:hidden; transform: translateY(8px);
        transition: opacity .2s ease, transform .2s ease, visibility 0s linear .2s;
        z-index:3;
        pointer-events:none;
        overflow:auto;
    }

    &:hover &__hover {
        opacity:1;
        visibility:visible;
        transform: translateY(0);
        transition-delay:0s;
        pointer-events:auto;
    }

  /* На мобільних overlay не показуємо — працює bottom-sheet */
  @media (max-width: 767.98px){
    &__hover {
        display:none !important;
    }
  }
}

.product-card__btn {
  color: #474747;
  font-size: 14px;
  background-color: transparent !important;
  border: 1px solid #474747;
  padding: 12px 24px;
  border-radius: 100px;
  letter-spacing: 4px;
  text-transform: uppercase;
  line-height: 16px;
  font-weight: 400;

  opacity: 1;
  visibility: visible;
  display: block;

  @media (max-width: 767.98px){
    padding: 8px 12px;
  }
}

/* ==== Details (overlay/sheet) ==== */
.pcd {
    display:grid;
    grid-template-rows:auto auto 1fr auto;
    height:100%;

    &__header {
        display:flex;
        justify-content:center;
        align-items:center;
        gap:8px;
        position:relative;
    }

    &__title {
        font-weight:400;
        font-size:18px;
        line-height:24px;
        margin:0;
        text-align:center;
        margin-bottom: 8px;
    }

    &__wish,&__wish-round {
        appearance:none;
        border:1px solid #D5D5D5;
        background:#fff;
        border-radius:999px;
        width:28px;
        height:28px;
        display:inline-flex;
        align-items:center;
        justify-content:center;
        cursor:pointer;
        transition:border-color .2s ease, background .2s ease;
    }

    &__wish {
        position:absolute;
        right:0;
        top:0;
    }

    &__wish-ic {
        width:16px;
        height:16px;
    }

    &__short {
        font-size:14px;
        line-height:20px;
        color:#474747;
        text-align:center;
        margin-bottom: 16px;
    }

    &__divider {
        height:1px;
        background:#E6E6E6;
        margin:4px 0;
    }

    &__details {
        font-size:13px;
        line-height:1.45;
        color:#222;
        overflow:auto;
    }

    &__details ul {
        list-style:none;
        margin:0;
        padding:0;
    }

    &__details li {
        display:flex;
        justify-content:space-between;
        padding:6px 0;
        border-bottom:1px solid #EFEFEF;
    }

    &__details li:last-child {
        border-bottom:0;
    }

    &__details b,&__details strong {
        font-weight:600;
    }

    &__controls {
        margin-top:auto;
        display:grid;
        gap:20px;
    }

    &__qty {
        display:flex;
        align-items:center;
        justify-content:space-between;
    }

    &__qty-label {
        font-size:12px;
        line-height: 16px;
        letter-spacing:3px;
        text-transform:uppercase;
        color:#6b6b6b;
    }

    &__qty-box {
        display:inline-flex;
        align-items:center;
        gap:12px;
    }

    &__qty-btn {
        width:32px;
        height:32px;
        border-radius:999px;
        border:1px solid #D5D5D5;
        background:#fff;
        display:flex;
        align-items:center;
        justify-content:center;
        cursor:pointer;
    }

    &__qty-val {
        min-width:24px;
        text-align:center;
        font-weight:600;
    }

    &__actions {
        display:flex;
        align-items:center;
        gap:8px;
    }

    &__add {
        flex:1 1 auto;
        padding: 8px 12px;
        line-height: 1;
        border-radius:999px;
        display:flex;
        align-items:center;
        justify-content:center;
        background-color: #474747;
        font-size: 12px;
        font-weight: 500;
    }

    &__wish-round {
        width:32px;
        height:32px;
        background-color: #474747;
        color: #fff;
    }

    &__read {
        text-align:center;
    }

    .pcd__read-link {
        display:inline-flex;
        align-items:center;
        justify-content:center;
        font-size:12px;
        line-height: 16px;
        letter-spacing:3px;
        font-weight: 400;
        text-transform:uppercase;
        text-decoration: underline;
        text-underline-offset: 4px;
        cursor:pointer;
    }

    .pcd__read-link--desk {
        display:inline-flex;
    }

    // .pcd__read-link--mob {
    //     display:none;
    // }

  @media (max-width: 767.98px) {
    .pcd__read-link--mob {
        display:inline-flex;
    }
  }
}

/* ==== Bottom-sheet ==== */
.pcard-sheet {
    position:fixed;
    inset:0;
    z-index:60;
    pointer-events:none;

    &__backdrop {
        position:absolute;
        inset:0;
        background:rgba(0,0,0,.35);
        opacity:0;
        transition:opacity .2s ease;
    }

    &__panel{
        position:absolute;
        left:0;
        right:0;
        bottom:0;
        background:#fff;
        border-radius:16px 16px 0 0;
        transform:translateY(100%);
        transition:transform .28s ease;
        padding:14px 16px 18px; max-height:85vh; overflow:auto;
    }

    &__close {
        position:absolute;
        right:10px;
        top:10px;
        border:0;
        width:28px;
        height:28px;
        border-radius:999px;
        cursor:pointer;
        z-index: 2;
    }

    &__body {
        padding-top:8px;
    }
}
.pcard-sheet.is-open {
    pointer-events:auto;
}

.pcard-sheet.is-open .pcard-sheet__backdrop {
    opacity:1;
}

.pcard-sheet.is-open .pcard-sheet__panel {
    transform:translateY(0);
}


/* ====== SAFETY RESET / LAYOUT ====== */
.product-card {
    position: relative;
    display: flex;
    flex-direction: column;
    border-radius: 12px;
    overflow: visible;
    background-color: #EEEEEE;
  }

  .product-card__link {
    position: absolute;
    inset: 0;
    z-index: 1;
  }

    .product-card__media {
        position: relative;
        z-index: 0;
    }

    .product-card__content {
        position: relative;
        z-index: 0;
    }

    .product-card__cta,
    .product-card__more {
        position: relative;
        z-index: 2;
    }

    .product-card__img {
        width: 100%;
        height: auto;
        display: block;
        // object-fit: cover;
        object-fit: contain;
        aspect-ratio: 1/1;
        border-radius: 12px 12px 0 0;

        img {
            object-fit: contain;
        }
    }

  /* ====== DESKTOP OVERLAY ====== */
    .product-card__hover {
        position: absolute;
        left: 1px;
        right: 1px;
        top: 1px;
        bottom: 1px;
        background: #F5F5F5;
        border-radius: 12px;
        padding: 16px;
        overflow: auto;
        border: 1px solid #ADAEB0;

        /* початково приховано */
        opacity: 0;
        visibility: hidden;
        transform: translateY(8px);
        pointer-events: none;
        transition: opacity .2s ease, transform .2s ease, visibility 0s linear .2s;
        z-index: 3;
    }

    .product-card:hover .product-card__hover {
        opacity: 1;
        visibility: visible;
        transform: translateY(0);
        pointer-events: auto;
        transition-delay: 0s;
    }

  /* Контент всередині overlay / bottom-sheet */
    .pcd {
        display: grid;
        grid-template-rows: auto auto 1fr auto;
        height: 100%;
    }

    .pcd__details {
        overflow: auto;
    }

    /* ====== MOBILE RULES ====== */
    @media (max-width: 767.98px){
        /* overlay на мобайлі повністю відключаємо */
        .product-card__hover{ display: none !important; }

        /* показуємо блок із мобільною кнопкою Read more під основною CTA */
        .product-card__more{ display: block; padding: 0 16px 16px; }

        .product-card__read{
            width: 100%;
            height: 36px;
            font-size: 12px;
            letter-spacing: 3px;
            border: none;
            box-shadow: none;
            text-transform: uppercase;
            text-decoration: underline;
            text-underline-offset: 4px;
            background-color: transparent;
            color: #474747;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
        }
    }

  /* На десктопі мобільну кнопку приховуємо */
  @media (min-width: 768px){
    .product-card__more {
        display: none;
    }
  }
  @media (max-width: 768px){
    .pcd__details {
        margin-bottom: 20px;
    }
  }


  /* дрібні підчистки richtext, щоб не “розсипалось” */
    .pcd__details ul {
        list-style: none;
        margin: 0;
        padding: 0;
        border-top: 1px solid #474747;
        border-bottom: 1px solid #474747;
        padding: 10px 0;
    }

    .pcd__details li {
        display: flex;
        justify-content: space-between;
        gap: 12px;
        padding: 6px 0;
        border: none;
        font-size: 16px;
    }

    .pcd__details li:last-child {
        border-bottom: 0;
    }

    .pcd__details p {
        margin: 6px 0;
    }

  /* Кнопки кількості — компактний вигляд */
    .pcd__qty-box {
        display: inline-flex;
        align-items: center;
        gap: 12px;
    }

    .pcd__qty-btn {
        width: 32px;
        height: 32px;
        border-radius: 999px;
        border: 1px solid #D5D5D5;
        background: #fff;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
    }

    .pcd__qty-val {
        min-width: 24px;
        text-align: center;
        font-weight: 600;
    }


/* SIMPLE hover mode */
.product-card[data-hover='simple'] {
    height: 100%;
    .product-card__hover { display: none !important; }

    .product-card__cta {
      position: absolute;
      left: 16px;
      right: 16px;
      bottom: 5px;
      z-index: 15;
      @media (max-width: 767.98px) {
        bottom: 5px;
      }

      .product-card__btn {
        background-color: #F5F5F5;
      }
    }

    .product-card__cta {
      opacity: 1;
      transform: none;
      visibility: visible;
      pointer-events: auto;
      display: flex;
      justify-content: center;
    }
  }

  /* у full режимі мобільна CTA ховається на десктопі (без змін) */
  @media (min-width: 768px) {
    .product-card[data-hover='full'] .product-card__cta { display: none !important; }
  }

  /* повага до reduce-motion */
  @media (prefers-reduced-motion: reduce) {
    .product-card[data-hover='simple'] .product-card__cta {
      transition: none !important;
      transform: none !important;
    }
  }

  .products-section {
    .swiper-wrapper {
        min-height: 474px;
    }
  }

.template-collection {
    @media (max-width: 768px) {
        .product-card {
            height: 100%;
        }

        .product-card[data-hover=simple] {
            .product-card__cta {
                padding: 0px 0px 24px;
                position: static;
                // left: 12px;
                // right: 12px;
            }
        }

        .product-card__cta {
            padding: 10px 4px 16px;
        }

        .product-card__btn {
            font-weight: normal;
            padding: 8px 10px;
        }

        .product-card__content {
            padding: 0 8px;
            // margin-bottom: 30px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            height: 100%;
            margin-bottom: 5px;
        }


        .product-card__badge-and-btn {
            padding: 9px 10px;
        }
    }
}


