{% render 'entry' with '@/styles/sections/advantages.scss' %}

<section
  id="advantages-{{ section.id }}"
  class="advantages palette-{{ section.settings.color_scheme }} py-[{{ section.settings.padding_top }}px] md:py-[{{ section.settings.padding_top }}px] pb-[{{ section.settings.padding_bottom }}px]"
>
  <div class="container">

    <div id="useful-properties" class="advantages__inner">
      <div class="advantages__text">
        {% if section.settings.heading != blank %}
            <h2 class="advantages__title heading-3 mb-[40px] md:mb-[0]">
              {{ section.settings.heading | escape }}
            </h2>
          {% endif %}
      </div>
      <div class="advantages__media relative mb-[40px] md:mb-[0]">
        {% if section.settings.image_desktop != blank or section.settings.image_mobile != blank %}
          <picture>
            {% if section.settings.image_desktop != blank %}
              <source media="(min-width: 768px)"
                      srcset="{{ section.settings.image_desktop | image_url: width: 1200 }}"
                      width="{{ section.settings.image_desktop.width }}"
                      height="{{ section.settings.image_desktop.height }}">
            {% endif %}
            <img
              class="mx-auto block h-auto w-full max-w-[400px]"
              {% if section.settings.image_mobile != blank %}
                src="{{ section.settings.image_mobile | image_url: width: 800 }}"
                width="{{ section.settings.image_mobile.width }}"
                height="{{ section.settings.image_mobile.height }}"
              {% else %}
                src="{{ section.settings.image_desktop | image_url: width: 800 }}"
                width="{{ section.settings.image_desktop.width }}"
                height="{{ section.settings.image_desktop.height }}"
              {% endif %}
              alt="{{ section.settings.image_alt | escape }}"
              loading="lazy"
            >
          </picture>
        {% endif %}

        {%- comment -%} optional decorative bg hook {%- endcomment -%}
        <div class="advantages__decor pointer-events-none" aria-hidden="true"></div>
      </div>

      {%- comment -%} List {%- endcomment -%}
      {%- assign items = section.blocks | where: 'type', 'advantage' -%}
      {% if items.size > 0 %}
        <ol class="advantages__list grid grid-cols-2 sm:grid-cols-2 gap-6 md:gap-[32px] counter-reset md:pl-[100px]">
          {% for block in items %}  
            {%- assign num_str = forloop.index | prepend: '0' -%}
            <li class="advantages__item flex gap-[4px] flex-col" {{ block.shopify_attributes }}>
              <div class="advantages__num shrink-0">
                <h5 class="advantages__num-badge heading-5">{{ block.settings.list_item_number }}</h5>
              </div>
              <div class="advantages__list text-[13px] leading-[1.35] md:text-[14px]">
                {% if block.settings.text != blank %}
                  <p class="opacity-85">{{ block.settings.text }}</p>
                {% endif %}
              </div>
            </li>
          {% endfor %}
        </ol>
      {% endif %}
    </div>
  </div>

  {% schema %}
  {
    "name": "Advantages",
    "class": "section-advantages",
    "settings": [
      { "type": "text", "id": "heading", "label": "Heading", "default": "Useful properties" },
      { "type": "image_picker", "id": "image_desktop", "label": "Desktop image" },
      { "type": "image_picker", "id": "image_mobile", "label": "Mobile image (optional)" },
      { "type": "text", "id": "image_alt", "label": "Image alt text", "default": "Advantages image" },

      { "type": "range", "id": "padding_top", "label": "Padding (top/bottom)", "min": 0, "max": 100, "step": 1, "unit": "px", "default": 24 },
      { "type": "range", "id": "padding_bottom", "label": "Padding bottom", "min": 0, "max": 100, "step": 1, "unit": "px", "default": 24 },

      { "type": "select", "id": "color_scheme", "label": "Color scheme", "default": "default",
        "options": [
          { "value": "default", "label": "Default" },
          { "value": "inverse", "label": "Inverse" }
        ]
      }
    ],
    "blocks": [
      {
        "type": "advantage",
        "name": "Advantage item",
        "settings": [
        {
            "type": "text", 
            "id": "list_item_number",
            "label": "Item number"
        },
        { 
            "type": "textarea", 
            "id": "text", 
            "label": "Description", 
            "default": "Short supporting line goes here." 
        }
        ]
      }
    ],
    "max_blocks": 12,
    "presets": [
      {
        "name": "Advantages",
        "blocks": [
          { "type": "advantage" },
          { "type": "advantage" },
          { "type": "advantage" },
          { "type": "advantage" },
          { "type": "advantage" },
          { "type": "advantage" }
        ]
      }
    ]
  }
  {% endschema %}
</section>