{% render 'entry' with '@/styles/sections/bundle-chips.scss' %}

<section id="bundle-chips-{{ section.id }}" class="b-bundle-chips py-6 md:py-8">
  <div class="container mx-auto px-4">
    <div class="b-bundle-chips__header">
      <div class="flex flex-col gap-1">
        {%- if section.settings.brand_title != blank -%}
          <div class="b-bundle-chips__brand md:hidden">
            {{ section.settings.brand_title }}
          </div>
        {%- endif -%}

        <div class="flex items-baseline justify-between gap-4">
          {%- if section.settings.heading != blank -%}
            <h2 class="b-bundle-chips__heading">
              {{ section.settings.heading }}
            </h2>
          {%- endif -%}

          {%- if section.settings.brand_title != blank -%}
            <h5 class="b-bundle-chips__brand hidden md:block">
              {{ section.settings.brand_title }}
            </h5>
          {%- endif -%}
        </div>
      </div>

      <div class="b-bundle-chips__divider mt-[16px] mb-[16px]"></div>
    </div>

    {%- if section.blocks.size > 0 -%}
      <div class="b-bundle-chips__chips flex flex-wrap gap-[8px]">
        {%- for block in section.blocks -%}
          {%- if block.settings.label != blank -%}
            {%- assign link_url = block.settings.url | default: '#' -%}
            <a
              {% if block.settings.url != blank %}href="{{ link_url }}"{% else %}role="button"{% endif %}
              class="chips-item"
              {{ block.shopify_attributes }}
            >
              {{ block.settings.label }}
            </a>
          {%- endif -%}
        {%- endfor -%}
      </div>
    {%- endif -%}
  </div>

  {% schema %}
  {
    "name": "Bundle chips",
    "tag": "section",
    "settings": [
      {
        "type": "text",
        "id": "brand_title",
        "label": "Brand title (The Real Mochi \u00ae)",
        "default": "The Real Mochi \u00ae"
      },
      {
        "type": "text",
        "id": "heading",
        "label": "Main heading",
        "default": "Build your own bundle"
      }
    ],
    "blocks": [
      {
        "type": "chip",
        "name": "Chip link",
        "settings": [
          {
            "type": "text",
            "id": "label",
            "label": "Label",
            "default": "Mochi Classic"
          },
          {
            "type": "url",
            "id": "url",
            "label": "Link URL"
          }
        ]
      }
    ],
    "presets": [
      {
        "name": "Bundle chips",
        "blocks": [
          {
            "type": "chip",
            "settings": {
              "label": "Mochi Classic"
            }
          },
          {
            "type": "chip",
            "settings": {
              "label": "Mochi Premium"
            }
          },
          {
            "type": "chip",
            "settings": {
              "label": "Mochi Cream Ice"
            }
          }
        ]
      }
    ]
  }
  {% endschema %}
</section>
